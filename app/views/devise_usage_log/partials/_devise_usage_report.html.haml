%h3= "Devise Usage Log for Past #{@num_days} Days"
.row
  .col-md-9
    .row
      .col-md-2
        %b= t('label.ip')
      .col-md-2
        %b= t('label.username')
      .col-md-2
        %b= t('label.role')
      .col-md-2
        %b= t('label.action')
      .col-md-2
        (#{link_to t('label.close_report').downcase, close_devise_usage_report_path, remote: true})

- previous_date_string = ''        
- @log_entries.each do |entry|
  .row
    .col-md-9
      - current_date_string = entry.created_at.strftime('%m/%d/%Y')
      %h4= current_date_string if current_date_string != previous_date_string
      .row
        .col-md-2= entry.user_ip
        .col-md-2= (entry.username.present?) ? entry.username : "(unknown)"
        .col-md-2= entry.role
        .col-md-4= "#{t(entry.action, scope: 'classy_enum.devise_action')} (#{entry.created_at.strftime('%H:%M')})" if entry.action.present?
      - previous_date_string = current_date_string
%br/
%br/
%br/
