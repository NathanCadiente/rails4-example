%h3= "Devise Usage Log for Past #{@num_days} Days"
.row
  .col-md-9
    .row
      .col-md-2
        %b= t('label.username')
      .col-md-2
        %b= t('label.ip')
      .col-md-2
        %b= t('label.role')
      .col-md-2
        %b= t('label.action_time')
      .col-md-2
        (#{link_to t('label.close_report').downcase, close_devise_usage_report_path, remote: true})

- previous_date_string = ''        
- @log_entries.each do |entry|
  .row
    .col-md-9
      - current_date_string = entry.updated_at.strftime('%m/%d/%Y')
      %h4= current_date_string if current_date_string != previous_date_string
      .row
        .col-md-2= (entry.user_name.present?) ? entry.user_name : "(unknown)"
        .col-md-2= entry.user_ip
        .col-md-2= entry.role
        .col-md-4= format_devise_usage_action_for entry
      - previous_date_string = current_date_string
%br/
%br/
%br/
