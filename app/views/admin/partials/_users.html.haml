%table.table.table-hover.table-condensed
  %thead
    %tr
      %th #
      %th= t('label.username')
      - if current_user.role?('admin')
        %th= t('label.email')
        %th= t('label.ip')
        %th= t('label.role')
      %th= t('label.last_login')
      %th= t('label.login_count')
      %th
  %tbody
    - @users.each do |user|
      - present user do |user_presenter|
        %tr
          %td= user_presenter.id
          %td= user_presenter.user_name
          - if current_user.role?('admin')
            %td= user_presenter.email
            %td= user_presenter.last_ip
            %td= user_presenter.role
          %td= user_presenter.last_login
          %td= user_presenter.sign_in_count
          %td
            - if current_user.role?('admin') && (user.username.downcase != current_user.username.downcase)
              = link_to t('button.edit'), edit_profile_path(id: user.id),
                        title: t('tooltip.edit_user'), rel: :tooltip,
                        data: {toggle: 'modal', target: 'edit_user_modal'},
                        remote: true, class: 'btn btn-success btn-xs'


= render 'admin/partials/add_user'

.modal#edit_user_modal{aria: {labelledby: 'myModalLabel', hidden: true}, role: 'dialog', tabindex: '-1'}